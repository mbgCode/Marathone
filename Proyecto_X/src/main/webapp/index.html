<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=
    , initial-scale=1.0">
    <title>Document</title>
    
    <script> 
	
	
		function llamada (){
			fetch ('Servlet_usuario')
			.then (response => response.json())
			.then (data => pintarTabla(data))
			
		}
		
		
		
		
		function pintarTabla(datos){ //aqui se pintan los datos. creamos un codigo html.
		let html = "<table border=1>";
			
		for (let i = 0;i<datos.length;i++){//Como datos (json) actua como un array.
			html +="<tr><td>"+datos[i].nombre+"</td><td>"+datos[i].apellidos+"</td>";
			html += "<td>"+datos[i].email+"</td><td>"+datos[i].poblacion+"</td>";
			html += "<td>"+datos[i].permiso+"</td><td>"+datos[i].foto+"</td></tr>";
		}	
		
		html +="</table>";
		//le pedimos que busque el id (listado) que hemos llamado dentro de body.
		document.getElementById("listado").innerHTML = html;
		
		}



        window.onload = function(){
	
         llamada();  
           
           
           
        }


	</script>
  
</head>


<body>

    <form name="insertarNave" action="Servlet_usuario" method="post" enctype="multipart/form-data">

        <ul>

            <li><label for="Titulo"><h1>Insertar usuario</h1></label> </li>
            <li><label>Nombre: </label> <input type="text" name="nombre"></li>
            <li><label>Apellidos: </label> <input type="text" name="apellidos"></li>
            <li><label>email: </label> <input type="text" name="email"></li>
            <li><label>poblacion: </label> <input type="text" name="poblacion"></li>
            <li><label>Permiso: </label> <input type="text" name="permiso"></li>
            <li><label>Foto: </label> <input type="file" name="foto"></li>
            
            <li><label>Enviar: </label><input type="submit" value="Guardar"> </li>
            
        </ul>

    </form>
    <h1>Listado</h1>
    <div id="listado">

    </div>

</body>
</html>